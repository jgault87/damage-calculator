<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dune: Awakening â€” Damage Calculator</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Rajdhani:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --sand-dark:   #0d0b08;
    --sand-base:   #1a1409;
    --sand-mid:    #2a1f0e;
    --sand-warm:   #3d2c13;
    --amber:       #c8871a;
    --amber-light: #e8a832;
    --amber-glow:  #ffcc55;
    --spice:       #ff6b1a;
    --spice-dark:  #c04010;
    --steel:       #7a8a9a;
    --steel-light: #aabbc8;
    --text-primary:#f5e8c0;
    --text-dim:    #c8a870;
    --text-muted:  #9a7d50;
    --blade:       #e84040;
    --dart:        #40a0e8;
    --heavy-dart:  #1a6fbe;
    --concussive:  #e86030;
    --energy:      #a040e8;
    --fire:        #ff5520;
    --fire-dot:    #ff3300;
    --poison:      #60cc30;
    --bleed:       #cc1a1a;
    --positive:    #50d870;
    --negative:    #ff4444;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--sand-dark);
    color: var(--text-primary);
    font-family: 'Rajdhani', sans-serif;
    font-weight: 500;
    min-height: 100vh;
    background-image:
      radial-gradient(ellipse 80% 40% at 50% 0%, #2a1500 0%, transparent 60%),
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='400' height='400' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
    overflow-x: hidden;
  }

  /* HEADER */
  header {
    text-align: center;
    padding: 3rem 1rem 1.5rem;
    position: relative;
  }
  header::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(200,135,26,0.08) 0%, transparent 100%);
    pointer-events: none;
  }
  .title-eyebrow {
    font-family: 'Rajdhani', sans-serif;
    font-weight: 300;
    letter-spacing: 0.4em;
    font-size: 0.75rem;
    color: var(--amber);
    text-transform: uppercase;
    margin-bottom: 0.5rem;
  }
  h1 {
    font-family: 'Cinzel', serif;
    font-weight: 800;
    font-size: clamp(1.6rem, 4vw, 2.8rem);
    color: var(--amber-glow);
    text-shadow: 0 0 40px rgba(255,180,50,0.4), 0 2px 0 rgba(0,0,0,0.8);
    letter-spacing: 0.05em;
    line-height: 1.1;
  }
  .subtitle {
    font-size: 0.85rem;
    color: var(--text-muted);
    letter-spacing: 0.15em;
    margin-top: 0.5rem;
  }
  .divider {
    width: 200px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--amber), transparent);
    margin: 1.2rem auto;
    opacity: 0.5;
  }

  /* LAYOUT */
  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 1rem 4rem;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
  }
  @media (max-width: 750px) {
    .container { grid-template-columns: 1fr; }
  }

  /* PANELS */
  .panel {
    background: linear-gradient(135deg, var(--sand-base) 0%, var(--sand-mid) 100%);
    border: 1px solid var(--sand-warm);
    border-radius: 2px;
    position: relative;
    overflow: hidden;
  }
  .panel::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--amber), transparent);
  }
  .panel-full { grid-column: 1 / -1; }
  .panel-header {
    padding: 1rem 1.2rem 0.7rem;
    border-bottom: 1px solid var(--sand-warm);
    display: flex;
    align-items: center;
    gap: 0.6rem;
  }
  .panel-icon {
    width: 20px; height: 20px;
    opacity: 0.7;
  }
  .panel-title {
    font-family: 'Cinzel', serif;
    font-size: 0.88rem;
    letter-spacing: 0.1em;
    color: var(--amber-light);
    text-transform: uppercase;
  }
  .panel-body { padding: 1.2rem; }

  /* FORM ELEMENTS */
  .field {
    margin-bottom: 1rem;
  }
  .field:last-child { margin-bottom: 0; }
  label {
    display: block;
    font-size: 0.9rem;
    color: var(--text-dim);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-bottom: 0.35rem;
  }
  label span.badge {
    display: inline-block;
    font-size: 0.7rem;
    padding: 2px 6px;
    border-radius: 2px;
    margin-left: 0.4em;
    vertical-align: middle;
    font-weight: 600;
    letter-spacing: 0.05em;
  }
  .badge-armor { background: rgba(200,135,26,0.15); color: var(--amber); border: 1px solid rgba(200,135,26,0.3);}
  .badge-type  { background: rgba(80,200,120,0.1); color: var(--positive); border: 1px solid rgba(80,200,120,0.25);}
  .badge-dot   { background: rgba(255,85,32,0.12); color: var(--spice); border: 1px solid rgba(255,85,32,0.3);}
  .badge-pvp   { background: rgba(200,30,30,0.15); color: var(--negative); border: 1px solid rgba(200,30,30,0.3);}

  input[type="number"] {
    width: 100%;
    background: rgba(0,0,0,0.4);
    border: 1px solid var(--sand-warm);
    border-radius: 2px;
    color: var(--text-primary);
    font-family: 'Rajdhani', sans-serif;
    font-size: 1.05rem;
    font-weight: 500;
    padding: 0.45rem 0.7rem;
    transition: border-color 0.2s, box-shadow 0.2s;
    -moz-appearance: textfield;
  }
  input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; }
  input[type="number"]:focus {
    outline: none;
    border-color: var(--amber);
    box-shadow: 0 0 0 2px rgba(200,135,26,0.2);
  }

  select {
    width: 100%;
    background: rgba(0,0,0,0.4);
    border: 1px solid var(--sand-warm);
    border-radius: 2px;
    color: var(--text-primary);
    font-family: 'Rajdhani', sans-serif;
    font-size: 0.9rem;
    font-weight: 500;
    padding: 0.45rem 0.7rem;
    cursor: pointer;
    transition: border-color 0.2s;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%23c8871a'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.7rem center;
  }
  select:focus { outline: none; border-color: var(--amber); }
  select option { background: #1a1409; }

  /* TOGGLE (PvP) */
  .toggle-row {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    margin-bottom: 0.8rem;
  }
  .toggle-label {
    font-family: 'Cinzel', serif;
    font-size: 0.92rem;
    color: var(--text-dim);
    letter-spacing: 0.1em;
    cursor: pointer;
    user-select: none;
  }
  .toggle-label.active { color: var(--negative); }
  .toggle-switch {
    position: relative;
    width: 44px; height: 22px;
    cursor: pointer;
    flex-shrink: 0;
  }
  .toggle-switch input { display: none; }
  .toggle-track {
    position: absolute; inset: 0;
    background: var(--sand-warm);
    border-radius: 11px;
    transition: background 0.25s;
    border: 1px solid rgba(255,255,255,0.08);
  }
  .toggle-switch input:checked + .toggle-track { background: rgba(180,30,30,0.6); border-color: var(--negative); }
  .toggle-thumb {
    position: absolute;
    top: 2px; left: 2px;
    width: 16px; height: 16px;
    background: var(--text-dim);
    border-radius: 50%;
    transition: left 0.25s, background 0.25s;
  }
  .toggle-switch input:checked ~ .toggle-thumb { left: 24px; background: var(--negative); }

  .pvp-sub {
    display: none;
    margin-top: 0.5rem;
    padding: 0.8rem;
    background: rgba(180,30,30,0.08);
    border: 1px solid rgba(180,30,30,0.2);
    border-radius: 2px;
  }
  .pvp-sub.visible { display: block; }
  .pvp-sub p {
    font-size: 0.82rem;
    color: var(--text-dim);
    margin-bottom: 0.6rem;
    line-height: 1.5;
  }

  /* MITIGATION GRID */
  .mit-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.7rem;
  }
  @media (max-width: 480px) {
    .mit-grid { grid-template-columns: 1fr; }
  }
  .mit-field label { display: flex; align-items: center; gap: 0.4rem; }
  .mit-dot {
    display: inline-block;
    width: 8px; height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  /* DAMAGE TYPE SELECTOR */
  .dmg-types {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
    gap: 0.5rem;
    margin-top: 0.5rem;
  }
  .dmg-btn {
    padding: 0.5rem 0.4rem;
    border: 1px solid var(--sand-warm);
    border-radius: 2px;
    background: rgba(0,0,0,0.3);
    color: var(--text-dim);
    font-family: 'Rajdhani', sans-serif;
    font-size: 0.78rem;
    font-weight: 600;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    cursor: pointer;
    text-align: center;
    transition: all 0.15s;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.2rem;
  }
  .dmg-btn:hover { border-color: var(--amber); color: var(--text-primary); }
  .dmg-btn.selected { color: #fff; }
  .dmg-btn .btn-icon { font-size: 1.1rem; }
  .dmg-btn .btn-sub { font-size: 0.72rem; font-weight: 400; letter-spacing: 0.08em; opacity: 0.75; }

  /* RESULTS */
  .results-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
  }
  .result-card {
    background: rgba(0,0,0,0.3);
    border: 1px solid var(--sand-warm);
    border-radius: 2px;
    padding: 1rem;
    position: relative;
    overflow: hidden;
  }
  .result-card::after {
    content: '';
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 1px;
  }
  .result-label {
    font-size: 0.78rem;
    color: var(--text-dim);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 0.4rem;
  }
  .result-value {
    font-family: 'Cinzel', serif;
    font-size: 2.1rem;
    font-weight: 600;
    line-height: 1;
    text-shadow: 0 0 20px currentColor;
  }
  .result-sub {
    font-size: 0.82rem;
    color: var(--text-dim);
    margin-top: 0.3rem;
  }
  .result-card.highlight {
    border-color: var(--amber);
    background: rgba(200,135,26,0.06);
  }
  .result-card.highlight::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: var(--amber);
    opacity: 0.5;
  }
  .result-card.danger {
    border-color: var(--spice-dark);
    background: rgba(192,64,16,0.06);
  }
  .result-card.danger::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: var(--spice);
    opacity: 0.5;
  }

  /* BREAKDOWN */
  .breakdown {
    margin-top: 1.2rem;
    padding: 1rem;
    background: rgba(0,0,0,0.25);
    border: 1px solid var(--sand-warm);
    border-radius: 2px;
    font-size: 0.82rem;
  }
  .breakdown-title {
    font-family: 'Cinzel', serif;
    font-size: 0.78rem;
    color: var(--amber-light);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    margin-bottom: 0.8rem;
  }
  .breakdown-step {
    display: flex;
    align-items: center;
    margin-bottom: 0.45rem;
    gap: 0.5rem;
  }
  .step-arrow {
    color: var(--amber);
    opacity: 0.5;
    font-size: 0.7rem;
    flex-shrink: 0;
  }
  .step-label { color: var(--text-dim); flex: 1; }
  .step-value { font-weight: 600; color: var(--text-primary); font-size: 1rem; }
  .step-eq {
    color: var(--text-dim);
    font-size: 0.8rem;
    flex: 2;
    font-family: monospace;
  }

  /* DOT SECTION */
  .dot-section {
    margin-top: 1.2rem;
    padding: 1rem;
    background: rgba(255,85,32,0.05);
    border: 1px solid rgba(255,85,32,0.2);
    border-radius: 2px;
    display: none;
  }
  .dot-section.visible { display: block; }
  .dot-title {
    font-family: 'Cinzel', serif;
    font-size: 0.78rem;
    color: var(--fire);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 0.8rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .dot-flame { animation: flicker 1.5s ease-in-out infinite alternate; }
  @keyframes flicker {
    from { opacity: 0.7; transform: scale(1); }
    to   { opacity: 1;   transform: scale(1.1); }
  }
  .dot-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem; }
  .dot-stat { padding: 0.7rem; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,85,32,0.15); border-radius: 2px; }
  .dot-stat-label { font-size: 0.75rem; color: var(--text-dim); letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 0.2rem; }
  .dot-stat-value { font-family: 'Cinzel', serif; font-size: 1.3rem; color: var(--fire); }

  /* DR BAR */
  .dr-bar-wrap {
    margin-top: 1rem;
    padding: 1rem;
    background: rgba(0,0,0,0.25);
    border: 1px solid var(--sand-warm);
    border-radius: 2px;
  }
  .dr-bar-title { font-size: 0.78rem; color: var(--text-dim); letter-spacing: 0.15em; text-transform: uppercase; margin-bottom: 0.6rem; }
  .dr-bar-track {
    height: 8px;
    background: rgba(255,255,255,0.05);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 0.3rem;
  }
  .dr-bar-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.4s cubic-bezier(0.4,0,0.2,1);
    background: linear-gradient(90deg, var(--amber), var(--amber-glow));
  }
  .dr-bar-labels { display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--text-dim); }

  /* NOTES */
  .note {
    font-size: 0.88rem;
    color: var(--text-dim);
    line-height: 1.65;
    padding: 0.7rem;
    background: rgba(0,0,0,0.2);
    border-left: 2px solid var(--amber);
    margin-top: 0.8rem;
  }
  .note strong { color: var(--amber-light); }

  /* ARMOR SECTION big display */
  .armor-display {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
  }
  .armor-big {
    font-family: 'Cinzel', serif;
    font-size: 2.4rem;
    font-weight: 800;
    color: var(--amber-glow);
    text-shadow: 0 0 30px rgba(255,200,80,0.4);
    line-height: 1;
    min-width: 80px;
  }
  .armor-pct {
    font-family: 'Cinzel', serif;
    font-size: 1.1rem;
    color: var(--amber);
    font-weight: 600;
  }
  .armor-sub { font-size: 0.82rem; color: var(--text-dim); }

  /* footer */
  footer {
    text-align: center;
    padding: 1.5rem;
    font-size: 0.78rem;
    color: var(--text-dim);
    letter-spacing: 0.1em;
    border-top: 1px solid var(--sand-warm);
    margin-top: 1rem;
  }
  footer a { color: var(--amber); text-decoration: none; }

  .separator {
    grid-column: 1 / -1;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--sand-warm), transparent);
  }
</style>
</head>
<body>

<header>
  <div class="title-eyebrow">â˜½ Arrakis Combat Systems</div>
  <h1>Damage Calculator</h1>
  <div class="subtitle">Dune: Awakening &mdash; Damage Reduction & Mitigation</div>
  <div class="divider"></div>
</header>

<div class="container">

  <!-- ARMOR PANEL -->
  <div class="panel">
    <div class="panel-header">
      <div class="panel-title">âš” Armor &amp; Defense</div>
    </div>
    <div class="panel-body">
      <div class="field">
        <label>Armor Value <span class="badge badge-armor">Base DR</span></label>
        <input type="number" id="armorValue" value="500" min="0" max="9999">
      </div>
      <div class="armor-display">
        <div>
          <div class="armor-pct" id="armorPct">50.0%</div>
          <div class="armor-sub">Armor Damage Reduction</div>
        </div>
        <div>
          <div class="armor-pct" id="ehpMultiplier" style="color:var(--steel-light)">2.00Ã—</div>
          <div class="armor-sub">EHP Multiplier</div>
        </div>
      </div>
      <div class="dr-bar-wrap">
        <div class="dr-bar-title">DR Visualization</div>
        <div class="dr-bar-track"><div class="dr-bar-fill" id="drBarFill" style="width:50%"></div></div>
        <div class="dr-bar-labels"><span>0%</span><span>50%</span><span>75%</span><span>90%</span><span>100%</span></div>
      </div>
    </div>
  </div>

  <!-- PVP PANEL -->
  <div class="panel">
    <div class="panel-header">
      <div class="panel-title">âš¡ Combat Mode</div>
    </div>
    <div class="panel-body">
      <div class="toggle-row">
        <label class="toggle-label" id="pveLabel" style="color:var(--positive)">PvE</label>
        <label class="toggle-switch">
          <input type="checkbox" id="pvpToggle">
          <div class="toggle-track"></div>
          <div class="toggle-thumb"></div>
        </label>
        <label class="toggle-label" id="pvpLabel" for="pvpToggle">PvP</label>
      </div>
      <div class="pvp-sub" id="pvpSub">
        <p style="margin-bottom:0.8rem;font-size:0.9rem">
          PvP has a global damage reduction applied before armor DR:
          <strong style="color:var(--amber-light);font-size:1rem">âˆ’40% on body shots</strong> and
          <strong style="color:var(--negative);font-size:1rem">âˆ’60% on headshots</strong>.
        </p>
        <div class="toggle-row" style="margin-bottom:0">
          <label class="toggle-label" id="bodyLabel" style="color:var(--positive)">Body Shot</label>
          <label class="toggle-switch">
            <input type="checkbox" id="headShotToggle">
            <div class="toggle-track"></div>
            <div class="toggle-thumb"></div>
          </label>
          <label class="toggle-label" id="headLabel" for="headShotToggle">Headshot</label>
        </div>
        <div class="note" style="margin-top:0.7rem">
          Poison is always a body shot (DoTs have no headshot mechanic). Concussive/AoE damage always counts as body shots too.
        </div>
      </div>
      <div class="note" style="margin-top:0.5rem">
        <strong>Bleed</strong> bypasses armor DR entirely but <strong>cannot penetrate shields</strong> â€” the target's shield must be down for bleed to deal health damage. Only raw HP mitigation from skills applies once the shield is gone.
        This calculator does not include bleed since it ignores the armor formula.
      </div>
    </div>
  </div>

  <!-- MITIGATION PANEL -->
  <div class="panel panel-full">
    <div class="panel-header">
      <div class="panel-title">ðŸ›¡ Type Mitigations</div>
    </div>
    <div class="panel-body">
      <p style="font-size:0.88rem;color:var(--text-dim);margin-bottom:1rem">
        Enter your gear/perk mitigation values. Positive = less damage taken. Negative = more damage taken (e.g. heavy armor's âˆ’40% blade mitigation means you take 40% extra blade damage). DoT resistances only apply to tick damage â€” armor DR does not affect DoTs.
      </p>
      <div class="mit-grid">
        <div class="mit-field field">
          <label><span class="mit-dot" style="background:var(--blade)"></span> Blade Mitigation %</label>
          <input type="number" id="mit_blade" value="0" min="-100" max="100">
        </div>
        <div class="mit-field field">
          <label><span class="mit-dot" style="background:var(--dart)"></span> Light Dart Mitigation %</label>
          <input type="number" id="mit_lightdart" value="0" min="-100" max="100">
        </div>
        <div class="mit-field field">
          <label><span class="mit-dot" style="background:var(--heavy-dart)"></span> Heavy Dart Mitigation %</label>
          <input type="number" id="mit_heavydart" value="0" min="-100" max="100">
        </div>
        <div class="mit-field field">
          <label><span class="mit-dot" style="background:var(--concussive)"></span> Concussive Mitigation %</label>
          <input type="number" id="mit_concussive" value="0" min="-100" max="100">
        </div>
        <div class="mit-field field">
          <label><span class="mit-dot" style="background:var(--energy)"></span> Energy Impact Mitigation %</label>
          <input type="number" id="mit_energy" value="0" min="-100" max="100">
        </div>
        <div class="mit-field field">
          <label><span class="mit-dot" style="background:var(--fire)"></span> Fire Impact Mitigation %</label>
          <input type="number" id="mit_fire_impact" value="0" min="-100" max="100">
        </div>
        <div class="mit-field field">
          <label><span class="mit-dot" style="background:var(--fire-dot)"></span> Fire Resistance % <span class="badge badge-dot">DoT</span></label>
          <input type="number" id="mit_fire_dot" value="0" min="-100" max="100">
        </div>
        <div class="mit-field field">
          <label><span class="mit-dot" style="background:var(--poison)"></span> Poison Resistance % <span class="badge badge-dot">DoT</span></label>
          <input type="number" id="mit_poison" value="0" min="-100" max="100">
        </div>
      </div>
    </div>
  </div>

  <!-- INCOMING DAMAGE PANEL -->
  <div class="panel">
    <div class="panel-header">
      <div class="panel-title">ðŸ’¥ Incoming Attack</div>
    </div>
    <div class="panel-body">
      <div class="field">
        <label>Raw Incoming Damage</label>
        <input type="number" id="rawDamage" value="100" min="0" max="99999">
      </div>

      <label style="margin-bottom:0.4rem">Damage Type</label>
      <div class="dmg-types" id="dmgTypes">
        <button class="dmg-btn selected" data-type="blade" style="border-color:var(--blade);color:var(--blade)">
          <span class="btn-icon">âš”</span>
          <span>Blade</span>
        </button>
        <button class="dmg-btn" data-type="lightdart" style="">
          <span class="btn-icon">ðŸŽ¯</span>
          <span>Light Dart</span>
        </button>
        <button class="dmg-btn" data-type="heavydart">
          <span class="btn-icon">ðŸ”«</span>
          <span>Heavy Dart</span>
        </button>
        <button class="dmg-btn" data-type="concussive">
          <span class="btn-icon">ðŸ’£</span>
          <span>Concussive</span>
        </button>
        <button class="dmg-btn" data-type="energy">
          <span class="btn-icon">âš¡</span>
          <span>Energy</span>
        </button>
        <button class="dmg-btn" data-type="fire">
          <span class="btn-icon">ðŸ”¥</span>
          <span>Fire</span>
          <span class="btn-sub">Impact + DoT</span>
        </button>
        <button class="dmg-btn" data-type="poison">
          <span class="btn-icon">â˜ </span>
          <span>Poison</span>
          <span class="btn-sub">DoT only</span>
        </button>
      </div>

      <div id="dotSplitWrap" style="display:none;margin-top:1rem">
        <div class="field">
          <label>Impact Portion of Hit <span class="badge badge-armor">Reduced by Armor DR</span></label>
          <input type="number" id="dotSplitImpact" value="60" min="0" max="100">
        </div>
        <div class="field">
          <label>DoT Portion of Hit <span class="badge badge-dot">Bypasses Armor DR</span></label>
          <input type="number" id="dotSplitDot" value="40" min="0" max="100" readonly style="opacity:0.7;cursor:not-allowed">
        </div>
        <div class="note">Split between impact (armor applies) and DoT burn (armor ignored, only resistance stat applies). Adjust based on the specific weapon.</div>
      </div>

      <div id="poisonNote" style="display:none;margin-top:1rem" class="note">
        <strong>Poison</strong> is a pure DoT â€” it deals no impact damage. Armor DR does not apply. Only Poison Resistance reduces tick damage. Poison also bypasses shields.
      </div>
    </div>
  </div>

  <!-- RESULTS PANEL -->
  <div class="panel">
    <div class="panel-header">
      <div class="panel-title">ðŸ“Š Results</div>
    </div>
    <div class="panel-body">
      <div class="results-grid" id="resultsGrid">
        <div class="result-card highlight">
          <div class="result-label">Damage Taken (Impact)</div>
          <div class="result-value" id="resDamageTaken" style="color:var(--amber-glow)">â€”</div>
          <div class="result-sub" id="resDamageSub">per hit</div>
        </div>
        <div class="result-card">
          <div class="result-label">Total DR Applied</div>
          <div class="result-value" id="resTotalDR" style="color:var(--positive)">â€”</div>
          <div class="result-sub">combined reduction</div>
        </div>
        <div class="result-card">
          <div class="result-label">Damage Blocked</div>
          <div class="result-value" id="resDamageBlocked" style="color:var(--steel-light)">â€”</div>
          <div class="result-sub">prevented per hit</div>
        </div>
        <div class="result-card">
          <div class="result-label">EHP vs this type</div>
          <div class="result-value" id="resEHP" style="color:var(--amber)">â€”</div>
          <div class="result-sub" id="resEHPSub">at 100 HP</div>
        </div>
      </div>

      <div class="dot-section" id="dotSection">
        <div class="dot-title"><span class="dot-flame">ðŸ”¥</span> DoT Damage (Per Tick)</div>
        <div class="dot-grid">
          <div class="dot-stat">
            <div class="dot-stat-label">Raw DoT Tick</div>
            <div class="dot-stat-value" id="dotRawTick" style="color:var(--fire)">â€”</div>
          </div>
          <div class="dot-stat">
            <div class="dot-stat-label">Reduced DoT Tick</div>
            <div class="dot-stat-value" id="dotReducedTick" style="color:var(--fire-dot)">â€”</div>
          </div>
          <div class="dot-stat">
            <div class="dot-stat-label">DoT Resistance</div>
            <div class="dot-stat-value" id="dotResistPct" style="color:var(--positive); font-size:1.1rem">â€”</div>
          </div>
          <div class="dot-stat">
            <div class="dot-stat-label">Bypasses Armor DR</div>
            <div class="dot-stat-value" style="color:var(--negative); font-size:1rem">YES</div>
          </div>
        </div>
        <div class="note" style="margin-top:0.8rem">
          <strong>DoT bypasses shields</strong> in addition to ignoring armor DR. Fire, Energy, and Poison ticks deal direct health damage.
        </div>
      </div>

      <div class="breakdown" id="breakdown">
        <div class="breakdown-title">Calculation Breakdown</div>
        <div id="breakdownSteps"></div>
      </div>
    </div>
  </div>

  <!-- REFERENCE PANEL -->
  <div class="panel panel-full">
    <div class="panel-header">
      <div class="panel-title">ðŸ“‹ Quick Reference</div>
    </div>
    <div class="panel-body">
      <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:1rem;font-size:0.88rem;color:var(--text-dim)">
        <div>
          <div style="color:var(--amber);font-family:'Cinzel',serif;font-size:0.78rem;letter-spacing:0.08em;margin-bottom:0.5rem">ARMOR BENCHMARKS</div>
          <div style="display:grid;grid-template-columns:auto auto 1fr;gap:0.2rem 0.6rem">
            <span>250</span><span style="color:var(--text-primary)">33.3% DR</span><span style="color:var(--text-muted)">Stillsuit range</span>
            <span>500</span><span style="color:var(--text-primary)">50.0% DR</span><span style="color:var(--text-muted)">2Ã— EHP</span>
            <span>1000</span><span style="color:var(--text-primary)">66.7% DR</span><span style="color:var(--text-muted)">3Ã— EHP</span>
            <span>1500</span><span style="color:var(--text-primary)">75.0% DR</span><span style="color:var(--text-muted)">CHOAM Heavy</span>
            <span>2000</span><span style="color:var(--text-primary)">80.0% DR</span><span style="color:var(--text-muted)">5Ã— EHP</span>
            <span>4500</span><span style="color:var(--text-primary)">90.0% DR</span><span style="color:var(--text-muted)">10Ã— EHP</span>
          </div>
        </div>
        <div>
          <div style="color:var(--amber);font-family:'Cinzel',serif;font-size:0.78rem;letter-spacing:0.08em;margin-bottom:0.5rem">PvP DAMAGE REDUCTION</div>
          <div style="line-height:2.0;font-size:0.88rem">
            <div><span style="color:var(--positive)">Body shot</span> â€” incoming damage Ã—60% (âˆ’40%)</div>
            <div><span style="color:var(--negative)">Headshot</span> â€” incoming damage Ã—40% (âˆ’60%)</div>
            <div style="color:var(--text-muted);font-size:0.82rem">Applied before armor DR &amp; type mitigation</div>
            <div style="color:var(--text-muted);font-size:0.82rem">Poison/concussive always body shot</div>
            <div style="font-size:0.8rem;color:var(--text-dim);margin-top:0.3rem">Applied before armor DR &amp; type mitigation</div>
          </div>
        </div>
        <div>
          <div style="color:var(--amber);font-family:'Cinzel',serif;font-size:0.78rem;letter-spacing:0.08em;margin-bottom:0.5rem">ARMOR TYPE TRAITS</div>
          <div style="line-height:2.0;font-size:0.88rem">
            <div><span style="color:var(--dart)">Light Armor</span> â€” âˆ’20% blade taken, âˆ’30% dash cost</div>
            <div><span style="color:var(--heavy-dart)">Heavy Armor</span> â€” +40% blade taken, âˆ’20% dart/concussive</div>
            <div><span style="color:var(--text-muted)">Stillsuit</span> â€” ~91 armor, heat resistance</div>
          </div>
        </div>
        <div>
          <div style="color:var(--amber);font-family:'Cinzel',serif;font-size:0.78rem;letter-spacing:0.08em;margin-bottom:0.5rem">DOT RULES</div>
          <div style="line-height:2.0;font-size:0.88rem">
            <div><span style="color:var(--fire)">Fire DoT</span> â€” bypasses armor DR + shields</div>
            <div><span style="color:var(--poison)">Poison DoT</span> â€” bypasses armor DR + shields</div>
            <div><span style="color:var(--bleed)">Bleed</span> â€” bypasses armor DR, <strong>blocked by shields</strong></div>
            <div><span style="color:var(--energy)">Energy</span> â€” impact only, no DoT</div>
          </div>
        </div>
        <div>
          <div style="color:var(--amber);font-family:'Cinzel',serif;font-size:0.78rem;letter-spacing:0.08em;margin-bottom:0.5rem">FORMULA</div>
          <div style="font-family:monospace;font-size:0.85rem;line-height:2.1;color:var(--text-primary)">
            <div>Armor DR = armor / (armor + 500)</div>
            <div>Damage = raw Ã— pvpMod (0.6 body / 0.4 hs)</div>
            <div>         Ã— (1 âˆ’ armorDR)</div>
            <div>         Ã— (1 âˆ’ typeMit)</div>
            <div style="color:var(--fire-dot)">DoT = raw Ã— pvpMod Ã— (1 âˆ’ resistance)</div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<footer>
  Dune: Awakening Damage Calculator &mdash;
  Formulas based on community research. PvP modifier is estimated.
  <a href="https://duneawakening.com" target="_blank">duneawakening.com</a>
</footer>

<script src="js/main.js"></script>
</body>
</html>
